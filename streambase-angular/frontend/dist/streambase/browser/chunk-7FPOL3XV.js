import{f as hi,h as di,i as $}from"./chunk-VFXDPC4I.js";import{$ as g,$a as qr,A as oe,Aa as xt,Ba as zr,Ca as ce,Cc as it,D as Je,Da as Lt,Ec as ni,F as re,Ga as _t,H as m,I as ae,Ic as si,Jb as Yr,K as Dt,L as le,M as Or,Mc as oi,Nc as ai,Oc as Me,P as Ze,Pc as li,Q as Z,Qb as Kr,Qc as ui,R as $t,Rc as Ae,S as Tr,T as Dr,Wb as Jr,X as $r,Y as U,Yb as Zr,Z as ue,Zb as Xr,a as c,aa as O,ad as ci,b as y,ca as R,da as Pr,db as q,e as Ur,ea as Nr,eb as Br,f as Ir,fa as L,ga as Pt,h as Et,ha as G,i as Ot,ia as d,j as T,ja as xr,jb as jt,jc as ei,k as A,ka as Lr,kb as Vr,ma as _r,n as z,na as jr,nb as b,oa as Xe,p as D,pa as kr,q as h,r as S,ra as Ie,rb as Hr,rc as ti,s as Mr,sa as H,sb as Wr,sc as ri,t as Ar,ta as et,tb as kt,tc as Ft,u as v,uc as zt,v as Ke,vc as ii,w as x,wb as Gr,wc as tt,x as Ue,xb as Qr,y as Er,ya as Nt,z as Tt,za as Fr,zc as rt}from"./chunk-EDYQIVRR.js";var w="primary",qe=Symbol("RouteTitle"),Wt=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function ve(r){return new Wt(r)}function hn(r,t,e){let i=e.path.split("/");if(i.length>r.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<r.length))return null;let n={};for(let s=0;s<i.length;s++){let o=i[s],l=r[s];if(o[0]===":")n[o.substring(1)]=l;else if(o!==l.path)return null}return{consumed:r.slice(0,i.length),posParams:n}}function dn(r,t){if(r.length!==t.length)return!1;for(let e=0;e<r.length;++e)if(!W(r[e],t[e]))return!1;return!0}function W(r,t){let e=r?Gt(r):void 0,i=t?Gt(t):void 0;if(!e||!i||e.length!=i.length)return!1;let n;for(let s=0;s<e.length;s++)if(n=e[s],!Ui(r[n],t[n]))return!1;return!0}function Gt(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}function Ui(r,t){if(Array.isArray(r)&&Array.isArray(t)){if(r.length!==t.length)return!1;let e=[...r].sort(),i=[...t].sort();return e.every((n,s)=>i[s]===n)}else return r===t}function Ii(r){return r.length>0?r[r.length-1]:null}function te(r){return Mr(r)?r:ri(r)?D(Promise.resolve(r)):h(r)}var pn={exact:Ai,subset:Ei},Mi={exact:fn,subset:gn,ignored:()=>!0};function pi(r,t,e){return pn[e.paths](r.root,t.root,e.matrixParams)&&Mi[e.queryParams](r.queryParams,t.queryParams)&&!(e.fragment==="exact"&&r.fragment!==t.fragment)}function fn(r,t){return W(r,t)}function Ai(r,t,e){if(!ne(r.segments,t.segments)||!ot(r.segments,t.segments,e)||r.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!r.children[i]||!Ai(r.children[i],t.children[i],e))return!1;return!0}function gn(r,t){return Object.keys(t).length<=Object.keys(r).length&&Object.keys(t).every(e=>Ui(r[e],t[e]))}function Ei(r,t,e){return Oi(r,t,t.segments,e)}function Oi(r,t,e,i){if(r.segments.length>e.length){let n=r.segments.slice(0,e.length);return!(!ne(n,e)||t.hasChildren()||!ot(n,e,i))}else if(r.segments.length===e.length){if(!ne(r.segments,e)||!ot(r.segments,e,i))return!1;for(let n in t.children)if(!r.children[n]||!Ei(r.children[n],t.children[n],i))return!1;return!0}else{let n=e.slice(0,r.segments.length),s=e.slice(r.segments.length);return!ne(r.segments,n)||!ot(r.segments,n,i)||!r.children[w]?!1:Oi(r.children[w],t,s,i)}}function ot(r,t,e){return t.every((i,n)=>Mi[e](r[n].parameters,i.parameters))}var Y=class{constructor(t=new I([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=ve(this.queryParams),this._queryParamMap}toString(){return wn.serialize(this)}},I=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return at(this)}},ie=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=ve(this.parameters),this._parameterMap}toString(){return Di(this)}};function vn(r,t){return ne(r,t)&&r.every((e,i)=>W(e.parameters,t[i].parameters))}function ne(r,t){return r.length!==t.length?!1:r.every((e,i)=>e.path===t[i].path)}function mn(r,t){let e=[];return Object.entries(r.children).forEach(([i,n])=>{i===w&&(e=e.concat(t(n,i)))}),Object.entries(r.children).forEach(([i,n])=>{i!==w&&(e=e.concat(t(n,i)))}),e}var Be=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=R({token:r,factory:()=>new me,providedIn:"root"})}}return r})(),me=class{parse(t){let e=new Yt(t);return new Y(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Ee(t.root,!0)}`,i=Rn(t.queryParams),n=typeof t.fragment=="string"?`#${Sn(t.fragment)}`:"";return`${e}${i}${n}`}},wn=new me;function at(r){return r.segments.map(t=>Di(t)).join("/")}function Ee(r,t){if(!r.hasChildren())return at(r);if(t){let e=r.children[w]?Ee(r.children[w],!1):"",i=[];return Object.entries(r.children).forEach(([n,s])=>{n!==w&&i.push(`${n}:${Ee(s,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=mn(r,(i,n)=>n===w?[Ee(r.children[w],!1)]:[`${n}:${Ee(i,!1)}`]);return Object.keys(r.children).length===1&&r.children[w]!=null?`${at(r)}/${e[0]}`:`${at(r)}/(${e.join("//")})`}}function Ti(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nt(r){return Ti(r).replace(/%3B/gi,";")}function Sn(r){return encodeURI(r)}function Qt(r){return Ti(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function lt(r){return decodeURIComponent(r)}function fi(r){return lt(r.replace(/\+/g,"%20"))}function Di(r){return`${Qt(r.path)}${yn(r.parameters)}`}function yn(r){return Object.entries(r).map(([t,e])=>`;${Qt(t)}=${Qt(e)}`).join("")}function Rn(r){let t=Object.entries(r).map(([e,i])=>Array.isArray(i)?i.map(n=>`${nt(e)}=${nt(n)}`).join("&"):`${nt(e)}=${nt(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var bn=/^[^\/()?;#]+/;function qt(r){let t=r.match(bn);return t?t[0]:""}var Cn=/^[^\/()?;=#]+/;function Un(r){let t=r.match(Cn);return t?t[0]:""}var In=/^[^=?&#]+/;function Mn(r){let t=r.match(In);return t?t[0]:""}var An=/^[^&#]+/;function En(r){let t=r.match(An);return t?t[0]:""}var Yt=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new I([],{}):new I([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[w]=new I(t,e)),i}parseSegment(){let t=qt(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new O(4009,!1);return this.capture(t),new ie(lt(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=Un(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let n=qt(this.remaining);n&&(i=n,this.capture(i))}t[lt(e)]=lt(i)}parseQueryParam(t){let e=Mn(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let o=En(this.remaining);o&&(i=o,this.capture(i))}let n=fi(e),s=fi(i);if(t.hasOwnProperty(n)){let o=t[n];Array.isArray(o)||(o=[o],t[n]=o),o.push(s)}else t[n]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=qt(this.remaining),n=this.remaining[i.length];if(n!=="/"&&n!==")"&&n!==";")throw new O(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=w);let o=this.parseChildren();e[s]=Object.keys(o).length===1?o[w]:new I([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new O(4011,!1)}};function $i(r){return r.segments.length>0?new I([],{[w]:r}):r}function Pi(r){let t={};for(let[i,n]of Object.entries(r.children)){let s=Pi(n);if(i===w&&s.segments.length===0&&s.hasChildren())for(let[o,l]of Object.entries(s.children))t[o]=l;else(s.segments.length>0||s.hasChildren())&&(t[i]=s)}let e=new I(r.segments,t);return On(e)}function On(r){if(r.numberOfChildren===1&&r.children[w]){let t=r.children[w];return new I(r.segments.concat(t.segments),t.children)}return r}function se(r){return r instanceof Y}function Tn(r,t,e=null,i=null){let n=Ni(r);return xi(n,t,e,i)}function Ni(r){let t;function e(s){let o={};for(let a of s.children){let u=e(a);o[a.outlet]=u}let l=new I(s.url,o);return s===r&&(t=l),l}let i=e(r.root),n=$i(i);return t??n}function xi(r,t,e,i){let n=r;for(;n.parent;)n=n.parent;if(t.length===0)return Bt(n,n,n,e,i);let s=Dn(t);if(s.toRoot())return Bt(n,n,new I([],{}),e,i);let o=$n(s,n,r),l=o.processChildren?De(o.segmentGroup,o.index,s.commands):_i(o.segmentGroup,o.index,s.commands);return Bt(n,o.segmentGroup,l,e,i)}function ut(r){return typeof r=="object"&&r!=null&&!r.outlets&&!r.segmentPath}function Ne(r){return typeof r=="object"&&r!=null&&r.outlets}function Bt(r,t,e,i,n){let s={};i&&Object.entries(i).forEach(([a,u])=>{s[a]=Array.isArray(u)?u.map(p=>`${p}`):`${u}`});let o;r===t?o=e:o=Li(r,t,e);let l=$i(Pi(o));return new Y(l,s,n)}function Li(r,t,e){let i={};return Object.entries(r.children).forEach(([n,s])=>{s===t?i[n]=e:i[n]=Li(s,t,e)}),new I(r.segments,i)}var ct=class{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&ut(i[0]))throw new O(4003,!1);let n=i.find(Ne);if(n&&n!==Ii(i))throw new O(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Dn(r){if(typeof r[0]=="string"&&r.length===1&&r[0]==="/")return new ct(!0,0,r);let t=0,e=!1,i=r.reduce((n,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let l={};return Object.entries(s.outlets).forEach(([a,u])=>{l[a]=typeof u=="string"?u.split("/"):u}),[...n,{outlets:l}]}if(s.segmentPath)return[...n,s.segmentPath]}return typeof s!="string"?[...n,s]:o===0?(s.split("/").forEach((l,a)=>{a==0&&l==="."||(a==0&&l===""?e=!0:l===".."?t++:l!=""&&n.push(l))}),n):[...n,s]},[]);return new ct(e,t,i)}var pe=class{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function $n(r,t,e){if(r.isAbsolute)return new pe(t,!0,0);if(!e)return new pe(t,!1,NaN);if(e.parent===null)return new pe(e,!0,0);let i=ut(r.commands[0])?0:1,n=e.segments.length-1+i;return Pn(e,n,r.numberOfDoubleDots)}function Pn(r,t,e){let i=r,n=t,s=e;for(;s>n;){if(s-=n,i=i.parent,!i)throw new O(4005,!1);n=i.segments.length}return new pe(i,!1,n-s)}function Nn(r){return Ne(r[0])?r[0].outlets:{[w]:r}}function _i(r,t,e){if(r??=new I([],{}),r.segments.length===0&&r.hasChildren())return De(r,t,e);let i=xn(r,t,e),n=e.slice(i.commandIndex);if(i.match&&i.pathIndex<r.segments.length){let s=new I(r.segments.slice(0,i.pathIndex),{});return s.children[w]=new I(r.segments.slice(i.pathIndex),r.children),De(s,0,n)}else return i.match&&n.length===0?new I(r.segments,{}):i.match&&!r.hasChildren()?Kt(r,t,e):i.match?De(r,0,n):Kt(r,t,e)}function De(r,t,e){if(e.length===0)return new I(r.segments,{});{let i=Nn(e),n={};if(Object.keys(i).some(s=>s!==w)&&r.children[w]&&r.numberOfChildren===1&&r.children[w].segments.length===0){let s=De(r.children[w],t,e);return new I(r.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(n[s]=_i(r.children[s],t,o))}),Object.entries(r.children).forEach(([s,o])=>{i[s]===void 0&&(n[s]=o)}),new I(r.segments,n)}}function xn(r,t,e){let i=0,n=t,s={match:!1,pathIndex:0,commandIndex:0};for(;n<r.segments.length;){if(i>=e.length)return s;let o=r.segments[n],l=e[i];if(Ne(l))break;let a=`${l}`,u=i<e.length-1?e[i+1]:null;if(n>0&&a===void 0)break;if(a&&u&&typeof u=="object"&&u.outlets===void 0){if(!vi(a,u,o))return s;i+=2}else{if(!vi(a,{},o))return s;i++}n++}return{match:!0,pathIndex:n,commandIndex:i}}function Kt(r,t,e){let i=r.segments.slice(0,t),n=0;for(;n<e.length;){let s=e[n];if(Ne(s)){let a=Ln(s.outlets);return new I(i,a)}if(n===0&&ut(e[0])){let a=r.segments[t];i.push(new ie(a.path,gi(e[0]))),n++;continue}let o=Ne(s)?s.outlets[w]:`${s}`,l=n<e.length-1?e[n+1]:null;o&&l&&ut(l)?(i.push(new ie(o,gi(l))),n+=2):(i.push(new ie(o,{})),n++)}return new I(i,{})}function Ln(r){let t={};return Object.entries(r).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=Kt(new I([],{}),0,i))}),t}function gi(r){let t={};return Object.entries(r).forEach(([e,i])=>t[e]=`${i}`),t}function vi(r,t,e){return r==e.path&&W(t,e.parameters)}var $e="imperative",M=function(r){return r[r.NavigationStart=0]="NavigationStart",r[r.NavigationEnd=1]="NavigationEnd",r[r.NavigationCancel=2]="NavigationCancel",r[r.NavigationError=3]="NavigationError",r[r.RoutesRecognized=4]="RoutesRecognized",r[r.ResolveStart=5]="ResolveStart",r[r.ResolveEnd=6]="ResolveEnd",r[r.GuardsCheckStart=7]="GuardsCheckStart",r[r.GuardsCheckEnd=8]="GuardsCheckEnd",r[r.RouteConfigLoadStart=9]="RouteConfigLoadStart",r[r.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",r[r.ChildActivationStart=11]="ChildActivationStart",r[r.ChildActivationEnd=12]="ChildActivationEnd",r[r.ActivationStart=13]="ActivationStart",r[r.ActivationEnd=14]="ActivationEnd",r[r.Scroll=15]="Scroll",r[r.NavigationSkipped=16]="NavigationSkipped",r}(M||{}),k=class{constructor(t,e){this.id=t,this.url=e}},we=class extends k{constructor(t,e,i="imperative",n=null){super(t,e),this.type=M.NavigationStart,this.navigationTrigger=i,this.restoredState=n}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},V=class extends k{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=M.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},j=function(r){return r[r.Redirect=0]="Redirect",r[r.SupersededByNewNavigation=1]="SupersededByNewNavigation",r[r.NoDataFromResolver=2]="NoDataFromResolver",r[r.GuardRejected=3]="GuardRejected",r}(j||{}),ht=function(r){return r[r.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",r[r.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",r}(ht||{}),Q=class extends k{constructor(t,e,i,n){super(t,e),this.reason=i,this.code=n,this.type=M.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},X=class extends k{constructor(t,e,i,n){super(t,e),this.reason=i,this.code=n,this.type=M.NavigationSkipped}},xe=class extends k{constructor(t,e,i,n){super(t,e),this.error=i,this.target=n,this.type=M.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},dt=class extends k{constructor(t,e,i,n){super(t,e),this.urlAfterRedirects=i,this.state=n,this.type=M.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jt=class extends k{constructor(t,e,i,n){super(t,e),this.urlAfterRedirects=i,this.state=n,this.type=M.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zt=class extends k{constructor(t,e,i,n,s){super(t,e),this.urlAfterRedirects=i,this.state=n,this.shouldActivate=s,this.type=M.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Xt=class extends k{constructor(t,e,i,n){super(t,e),this.urlAfterRedirects=i,this.state=n,this.type=M.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},er=class extends k{constructor(t,e,i,n){super(t,e),this.urlAfterRedirects=i,this.state=n,this.type=M.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tr=class{constructor(t){this.route=t,this.type=M.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},rr=class{constructor(t){this.route=t,this.type=M.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ir=class{constructor(t){this.snapshot=t,this.type=M.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nr=class{constructor(t){this.snapshot=t,this.type=M.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sr=class{constructor(t){this.snapshot=t,this.type=M.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},or=class{constructor(t){this.snapshot=t,this.type=M.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pt=class{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=M.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Le=class{},Se=class{constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function _n(r,t){return r.providers&&!r._injector&&(r._injector=kt(r.providers,t,`Route: ${r.path}`)),r._injector??t}function B(r){return r.outlet||w}function jn(r,t){let e=r.filter(i=>B(i)===t);return e.push(...r.filter(i=>B(i)!==t)),e}function Ve(r){if(!r)return null;if(r.routeConfig?._injector)return r.routeConfig._injector;for(let t=r.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var ar=class{get injector(){return Ve(this.route?.snapshot)??this.rootInjector}set injector(t){}constructor(t){this.rootInjector=t,this.outlet=null,this.route=null,this.children=new He(this.rootInjector),this.attachRef=null}},He=(()=>{class r{constructor(e){this.rootInjector=e,this.contexts=new Map}onChildOutletCreated(e,i){let n=this.getOrCreateContext(e);n.outlet=i,this.contexts.set(e,n)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new ar(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(i){return new(i||r)(G(Ie))}}static{this.\u0275prov=R({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),ft=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=lr(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=lr(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=ur(t,this._root);return e.length<2?[]:e[e.length-2].children.map(n=>n.value).filter(n=>n!==t)}pathFromRoot(t){return ur(t,this._root).map(e=>e.value)}};function lr(r,t){if(r===t.value)return t;for(let e of t.children){let i=lr(r,e);if(i)return i}return null}function ur(r,t){if(r===t.value)return[t];for(let e of t.children){let i=ur(r,e);if(i.length)return i.unshift(t),i}return[]}var _=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function de(r){let t={};return r&&r.children.forEach(e=>t[e.value.outlet]=e),t}var gt=class extends ft{constructor(t,e){super(t),this.snapshot=e,wr(this,t)}toString(){return this.snapshot.toString()}};function ji(r){let t=kn(r),e=new A([new ie("",{})]),i=new A({}),n=new A({}),s=new A({}),o=new A(""),l=new ee(e,i,s,o,n,w,r,t.root);return l.snapshot=t.root,new gt(new _(l,[]),t)}function kn(r){let t={},e={},i={},n="",s=new fe([],t,i,n,e,w,r,null,{});return new mt("",new _(s,[]))}var ee=class{constructor(t,e,i,n,s,o,l,a){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=n,this.dataSubject=s,this.outlet=o,this.component=l,this._futureSnapshot=a,this.title=this.dataSubject?.pipe(v(u=>u[qe]))??h(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=n,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(v(t=>ve(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(v(t=>ve(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function vt(r,t,e="emptyOnly"){let i,{routeConfig:n}=r;return t!==null&&(e==="always"||n?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:c(c({},t.params),r.params),data:c(c({},t.data),r.data),resolve:c(c(c(c({},r.data),t.data),n?.data),r._resolvedData)}:i={params:c({},r.params),data:c({},r.data),resolve:c(c({},r.data),r._resolvedData??{})},n&&Fi(n)&&(i.resolve[qe]=n.title),i}var fe=class{get title(){return this.data?.[qe]}constructor(t,e,i,n,s,o,l,a,u){this.url=t,this.params=e,this.queryParams=i,this.fragment=n,this.data=s,this.outlet=o,this.component=l,this.routeConfig=a,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ve(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ve(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},mt=class extends ft{constructor(t,e){super(e),this.url=t,wr(this,e)}toString(){return ki(this._root)}};function wr(r,t){t.value._routerState=r,t.children.forEach(e=>wr(r,e))}function ki(r){let t=r.children.length>0?` { ${r.children.map(ki).join(", ")} } `:"";return`${r.value}${t}`}function Vt(r){if(r.snapshot){let t=r.snapshot,e=r._futureSnapshot;r.snapshot=e,W(t.queryParams,e.queryParams)||r.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&r.fragmentSubject.next(e.fragment),W(t.params,e.params)||r.paramsSubject.next(e.params),dn(t.url,e.url)||r.urlSubject.next(e.url),W(t.data,e.data)||r.dataSubject.next(e.data)}else r.snapshot=r._futureSnapshot,r.dataSubject.next(r._futureSnapshot.data)}function cr(r,t){let e=W(r.params,t.params)&&vn(r.url,t.url),i=!r.parent!=!t.parent;return e&&!i&&(!r.parent||cr(r.parent,t.parent))}function Fi(r){return typeof r.title=="string"||r.title===null}var Fn=(()=>{class r{constructor(){this.activated=null,this._activatedRoute=null,this.name=w,this.activateEvents=new ce,this.deactivateEvents=new ce,this.attachEvents=new ce,this.detachEvents=new ce,this.parentContexts=d(He),this.location=d(Vr),this.changeDetector=d(rt),this.inputBinder=d(Rt,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:n}=e.name;if(i)return;this.isTrackedInParentContexts(n)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(n)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new O(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new O(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new O(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new O(4013,!1);this._activatedRoute=e;let n=this.location,o=e.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,a=new hr(e,l,n.injector);this.activated=n.createComponent(o,{index:n.length,injector:a,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275dir=Xe({type:r,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[et]})}}return r})(),hr=class r{__ngOutletInjector(t){return new r(this.route,this.childContexts,t)}constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===ee?this.route:t===He?this.childContexts:this.parent.get(t,e)}},Rt=new L(""),mi=(()=>{class r{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:i}=e,n=Ke([i.queryParams,i.params,i.data]).pipe(U(([s,o,l],a)=>(l=c(c(c({},s),o),l),a===0?h(l):Promise.resolve(l)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(e);return}let o=si(i.component);if(!o){this.unsubscribeFromRouteData(e);return}for(let{templateName:l}of o.inputs)e.activatedComponentRef.setInput(l,s[l])});this.outletDataSubscriptions.set(e,n)}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=R({token:r,factory:r.\u0275fac})}}return r})();function zn(r,t,e){let i=_e(r,t._root,e?e._root:void 0);return new gt(i,t)}function _e(r,t,e){if(e&&r.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let n=qn(r,t,e);return new _(i,n)}else{if(r.shouldAttach(t.value)){let s=r.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(l=>_e(r,l)),o}}let i=Bn(t.value),n=t.children.map(s=>_e(r,s));return new _(i,n)}}function qn(r,t,e){return t.children.map(i=>{for(let n of e.children)if(r.shouldReuseRoute(i.value,n.value.snapshot))return _e(r,i,n);return _e(r,i)})}function Bn(r){return new ee(new A(r.url),new A(r.params),new A(r.queryParams),new A(r.fragment),new A(r.data),r.outlet,r.component,r)}var je=class{constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},zi="ngNavigationCancelingError";function wt(r,t){let{redirectTo:e,navigationBehaviorOptions:i}=se(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,n=qi(!1,j.Redirect);return n.url=e,n.navigationBehaviorOptions=i,n}function qi(r,t){let e=new Error(`NavigationCancelingError: ${r||""}`);return e[zi]=!0,e.cancellationCode=t,e}function Vn(r){return Bi(r)&&se(r.url)}function Bi(r){return!!r&&r[zi]}var Hn=(r,t,e,i)=>v(n=>(new dr(t,n.targetRouterState,n.currentRouterState,e,i).activate(r),n)),dr=class{constructor(t,e,i,n,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=n,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),Vt(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let n=de(e);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,n[o],i),delete n[o]}),Object.values(n).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){let n=t.value,s=e?e.value:null;if(n===s)if(n.component){let o=i.getContext(n.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),n=i&&t.value.component?i.children:e,s=de(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,n);if(i&&i.outlet){let o=i.outlet.detach(),l=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:l})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),n=i&&t.value.component?i.children:e,s=de(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,n);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let n=de(e);t.children.forEach(s=>{this.activateRoutes(s,n[s.value.outlet],i),this.forwardEvent(new or(s.value.snapshot))}),t.children.length&&this.forwardEvent(new nr(t.value.snapshot))}activateRoutes(t,e,i){let n=t.value,s=e?e.value:null;if(Vt(n),n===s)if(n.component){let o=i.getOrCreateContext(n.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,i);else if(n.component){let o=i.getOrCreateContext(n.outlet);if(this.routeReuseStrategy.shouldAttach(n.snapshot)){let l=this.routeReuseStrategy.retrieve(n.snapshot);this.routeReuseStrategy.store(n.snapshot,null),o.children.onOutletReAttached(l.contexts),o.attachRef=l.componentRef,o.route=l.route.value,o.outlet&&o.outlet.attach(l.componentRef,l.route.value),Vt(l.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=n,o.outlet&&o.outlet.activateWith(n,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,i)}},St=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},ge=class{constructor(t,e){this.component=t,this.route=e}};function Wn(r,t,e){let i=r._root,n=t?t._root:null;return Oe(i,n,e,[i.value])}function Gn(r){let t=r.routeConfig?r.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:r,guards:t}}function Re(r,t){let e=Symbol(),i=t.get(r,e);return i===e?typeof r=="function"&&!Nr(r)?r:t.get(r):i}function Oe(r,t,e,i,n={canDeactivateChecks:[],canActivateChecks:[]}){let s=de(t);return r.children.forEach(o=>{Qn(o,s[o.value.outlet],e,i.concat([o.value]),n),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,l])=>Pe(l,e.getContext(o),n)),n}function Qn(r,t,e,i,n={canDeactivateChecks:[],canActivateChecks:[]}){let s=r.value,o=t?t.value:null,l=e?e.getContext(r.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let a=Yn(o,s,s.routeConfig.runGuardsAndResolvers);a?n.canActivateChecks.push(new St(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Oe(r,t,l?l.children:null,i,n):Oe(r,t,e,i,n),a&&l&&l.outlet&&l.outlet.isActivated&&n.canDeactivateChecks.push(new ge(l.outlet.component,o))}else o&&Pe(t,l,n),n.canActivateChecks.push(new St(i)),s.component?Oe(r,null,l?l.children:null,i,n):Oe(r,null,e,i,n);return n}function Yn(r,t,e){if(typeof e=="function")return e(r,t);switch(e){case"pathParamsChange":return!ne(r.url,t.url);case"pathParamsOrQueryParamsChange":return!ne(r.url,t.url)||!W(r.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!cr(r,t)||!W(r.queryParams,t.queryParams);case"paramsChange":default:return!cr(r,t)}}function Pe(r,t,e){let i=de(r),n=r.value;Object.entries(i).forEach(([s,o])=>{n.component?t?Pe(o,t.children.getContext(s),e):Pe(o,null,e):Pe(o,t,e)}),n.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new ge(t.outlet.component,n)):e.canDeactivateChecks.push(new ge(null,n)):e.canDeactivateChecks.push(new ge(null,n))}function We(r){return typeof r=="function"}function Kn(r){return typeof r=="boolean"}function Jn(r){return r&&We(r.canLoad)}function Zn(r){return r&&We(r.canActivate)}function Xn(r){return r&&We(r.canActivateChild)}function es(r){return r&&We(r.canDeactivate)}function ts(r){return r&&We(r.canMatch)}function Vi(r){return r instanceof Ar||r?.name==="EmptyError"}var st=Symbol("INITIAL_VALUE");function ye(){return U(r=>Ke(r.map(t=>t.pipe(le(1),$r(st)))).pipe(v(t=>{for(let e of t)if(e!==!0){if(e===st)return st;if(e===!1||rs(e))return e}return!0}),re(t=>t!==st),le(1)))}function rs(r){return se(r)||r instanceof je}function is(r,t){return x(e=>{let{targetSnapshot:i,currentSnapshot:n,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return o.length===0&&s.length===0?h(y(c({},e),{guardsResult:!0})):ns(o,i,n,r).pipe(x(l=>l&&Kn(l)?ss(i,s,r,t):h(l)),v(l=>y(c({},e),{guardsResult:l})))})}function ns(r,t,e,i){return D(r).pipe(x(n=>cs(n.component,n.route,e,t,i)),Z(n=>n!==!0,!0))}function ss(r,t,e,i){return D(t).pipe(ae(n=>Er(as(n.route.parent,i),os(n.route,i),us(r,n.path,e),ls(r,n.route,e))),Z(n=>n!==!0,!0))}function os(r,t){return r!==null&&t&&t(new sr(r)),h(!0)}function as(r,t){return r!==null&&t&&t(new ir(r)),h(!0)}function ls(r,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return h(!0);let n=i.map(s=>Tt(()=>{let o=Ve(t)??e,l=Re(s,o),a=Zn(l)?l.canActivate(t,r):H(o,()=>l(t,r));return te(a).pipe(Z())}));return h(n).pipe(ye())}function us(r,t,e){let i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>Gn(o)).filter(o=>o!==null).map(o=>Tt(()=>{let l=o.guards.map(a=>{let u=Ve(o.node)??e,p=Re(a,u),f=Xn(p)?p.canActivateChild(i,r):H(u,()=>p(i,r));return te(f).pipe(Z())});return h(l).pipe(ye())}));return h(s).pipe(ye())}function cs(r,t,e,i,n){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return h(!0);let o=s.map(l=>{let a=Ve(t)??n,u=Re(l,a),p=es(u)?u.canDeactivate(r,t,e,i):H(a,()=>u(r,t,e,i));return te(p).pipe(Z())});return h(o).pipe(ye())}function hs(r,t,e,i){let n=t.canLoad;if(n===void 0||n.length===0)return h(!0);let s=n.map(o=>{let l=Re(o,r),a=Jn(l)?l.canLoad(t,e):H(r,()=>l(t,e));return te(a)});return h(s).pipe(ye(),Hi(i))}function Hi(r){return Ir(g(t=>{if(typeof t!="boolean")throw wt(r,t)}),v(t=>t===!0))}function ds(r,t,e,i){let n=t.canMatch;if(!n||n.length===0)return h(!0);let s=n.map(o=>{let l=Re(o,r),a=ts(l)?l.canMatch(t,e):H(r,()=>l(t,e));return te(a)});return h(s).pipe(ye(),Hi(i))}var ke=class{constructor(t){this.segmentGroup=t||null}},Fe=class extends Error{constructor(t){super(),this.urlTree=t}};function he(r){return S(new ke(r))}function ps(r){return S(new O(4e3,!1))}function fs(r){return S(qi(!1,j.GuardRejected))}var pr=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],n=e.root;for(;;){if(i=i.concat(n.segments),n.numberOfChildren===0)return h(i);if(n.numberOfChildren>1||!n.children[w])return ps(`${t.redirectTo}`);n=n.children[w]}}applyRedirectCommands(t,e,i,n,s){if(typeof e!="string"){let l=e,{queryParams:a,fragment:u,routeConfig:p,url:f,outlet:C,params:N,data:E,title:J}=n,F=H(s,()=>l({params:N,data:E,queryParams:a,fragment:u,routeConfig:p,url:f,outlet:C,title:J}));if(F instanceof Y)throw new Fe(F);e=F}let o=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e[0]==="/")throw new Fe(o);return o}applyRedirectCreateUrlTree(t,e,i,n){let s=this.createSegmentGroup(t,e.root,i,n);return new Y(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([n,s])=>{if(typeof s=="string"&&s[0]===":"){let l=s.substring(1);i[n]=e[l]}else i[n]=s}),i}createSegmentGroup(t,e,i,n){let s=this.createSegments(t,e.segments,i,n),o={};return Object.entries(e.children).forEach(([l,a])=>{o[l]=this.createSegmentGroup(t,a,i,n)}),new I(s,o)}createSegments(t,e,i,n){return e.map(s=>s.path[0]===":"?this.findPosParam(t,s,n):this.findOrReturn(s,i))}findPosParam(t,e,i){let n=i[e.path.substring(1)];if(!n)throw new O(4001,!1);return n}findOrReturn(t,e){let i=0;for(let n of e){if(n.path===t.path)return e.splice(i),n;i++}return t}},fr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gs(r,t,e,i,n){let s=Wi(r,t,e);return s.matched?(i=_n(t,i),ds(i,t,e,n).pipe(v(o=>o===!0?s:c({},fr)))):h(s)}function Wi(r,t,e){if(t.path==="**")return vs(e);if(t.path==="")return t.pathMatch==="full"&&(r.hasChildren()||e.length>0)?c({},fr):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let n=(t.matcher||hn)(e,r,t);if(!n)return c({},fr);let s={};Object.entries(n.posParams??{}).forEach(([l,a])=>{s[l]=a.path});let o=n.consumed.length>0?c(c({},s),n.consumed[n.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:n.consumed,remainingSegments:e.slice(n.consumed.length),parameters:o,positionalParamSegments:n.posParams??{}}}function vs(r){return{matched:!0,parameters:r.length>0?Ii(r).parameters:{},consumedSegments:r,remainingSegments:[],positionalParamSegments:{}}}function wi(r,t,e,i){return e.length>0&&Ss(r,e,i)?{segmentGroup:new I(t,ws(i,new I(e,r.children))),slicedSegments:[]}:e.length===0&&ys(r,e,i)?{segmentGroup:new I(r.segments,ms(r,e,i,r.children)),slicedSegments:e}:{segmentGroup:new I(r.segments,r.children),slicedSegments:e}}function ms(r,t,e,i){let n={};for(let s of e)if(bt(r,t,s)&&!i[B(s)]){let o=new I([],{});n[B(s)]=o}return c(c({},i),n)}function ws(r,t){let e={};e[w]=t;for(let i of r)if(i.path===""&&B(i)!==w){let n=new I([],{});e[B(i)]=n}return e}function Ss(r,t,e){return e.some(i=>bt(r,t,i)&&B(i)!==w)}function ys(r,t,e){return e.some(i=>bt(r,t,i))}function bt(r,t,e){return(r.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function Rs(r,t,e){return t.length===0&&!r.children[e]}var gr=class{};function bs(r,t,e,i,n,s,o="emptyOnly"){return new vr(r,t,e,i,n,o,s).recognize()}var Cs=31,vr=class{constructor(t,e,i,n,s,o,l){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=n,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=l,this.applyRedirects=new pr(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new O(4002,`'${t.segmentGroup}'`)}recognize(){let t=wi(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(v(({children:e,rootSnapshot:i})=>{let n=new _(i,e),s=new mt("",n),o=Tn(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(t){let e=new fe([],Object.freeze({}),Object.freeze(c({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),w,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,w,e).pipe(v(i=>({children:i,rootSnapshot:e})),m(i=>{if(i instanceof Fe)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof ke?this.noMatchError(i):i}))}processSegmentGroup(t,e,i,n,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i,s):this.processSegment(t,e,i,i.segments,n,!0,s).pipe(v(o=>o instanceof _?[o]:[]))}processChildren(t,e,i,n){let s=[];for(let o of Object.keys(i.children))o==="primary"?s.unshift(o):s.push(o);return D(s).pipe(ae(o=>{let l=i.children[o],a=jn(e,o);return this.processSegmentGroup(t,a,l,o,n)}),Dr((o,l)=>(o.push(...l),o)),Dt(null),Tr(),x(o=>{if(o===null)return he(i);let l=Gi(o);return Us(l),h(l)}))}processSegment(t,e,i,n,s,o,l){return D(e).pipe(ae(a=>this.processSegmentAgainstRoute(a._injector??t,e,a,i,n,s,o,l).pipe(m(u=>{if(u instanceof ke)return h(null);throw u}))),Z(a=>!!a),m(a=>{if(Vi(a))return Rs(i,n,s)?h(new gr):he(i);throw a}))}processSegmentAgainstRoute(t,e,i,n,s,o,l,a){return B(i)!==o&&(o===w||!bt(n,s,i))?he(n):i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,n,i,s,o,a):this.allowRedirects&&l?this.expandSegmentAgainstRouteUsingRedirect(t,n,e,i,s,o,a):he(n)}expandSegmentAgainstRouteUsingRedirect(t,e,i,n,s,o,l){let{matched:a,parameters:u,consumedSegments:p,positionalParamSegments:f,remainingSegments:C}=Wi(e,n,s);if(!a)return he(e);typeof n.redirectTo=="string"&&n.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Cs&&(this.allowRedirects=!1));let N=new fe(s,u,Object.freeze(c({},this.urlTree.queryParams)),this.urlTree.fragment,Si(n),B(n),n.component??n._loadedComponent??null,n,yi(n)),E=vt(N,l,this.paramsInheritanceStrategy);N.params=Object.freeze(E.params),N.data=Object.freeze(E.data);let J=this.applyRedirects.applyRedirectCommands(p,n.redirectTo,f,N,t);return this.applyRedirects.lineralizeSegments(n,J).pipe(x(F=>this.processSegment(t,i,e,F.concat(C),o,!1,l)))}matchSegmentAgainstRoute(t,e,i,n,s,o){let l=gs(e,i,n,t,this.urlSerializer);return i.path==="**"&&(e.children={}),l.pipe(U(a=>a.matched?(t=i._injector??t,this.getChildConfig(t,i,n).pipe(U(({routes:u})=>{let p=i._loadedInjector??t,{parameters:f,consumedSegments:C,remainingSegments:N}=a,E=new fe(C,f,Object.freeze(c({},this.urlTree.queryParams)),this.urlTree.fragment,Si(i),B(i),i.component??i._loadedComponent??null,i,yi(i)),J=vt(E,o,this.paramsInheritanceStrategy);E.params=Object.freeze(J.params),E.data=Object.freeze(J.data);let{segmentGroup:F,slicedSegments:Ce}=wi(e,C,N,u);if(Ce.length===0&&F.hasChildren())return this.processChildren(p,u,F,E).pipe(v(Ye=>new _(E,Ye)));if(u.length===0&&Ce.length===0)return h(new _(E,[]));let cn=B(i)===s;return this.processSegment(p,u,F,Ce,cn?w:s,!0,E).pipe(v(Ye=>new _(E,Ye instanceof _?[Ye]:[])))}))):he(e)))}getChildConfig(t,e,i){return e.children?h({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?h({routes:e._loadedRoutes,injector:e._loadedInjector}):hs(t,e,i,this.urlSerializer).pipe(x(n=>n?this.configLoader.loadChildren(t,e).pipe(g(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):fs(e))):h({routes:[],injector:t})}};function Us(r){r.sort((t,e)=>t.value.outlet===w?-1:e.value.outlet===w?1:t.value.outlet.localeCompare(e.value.outlet))}function Is(r){let t=r.value.routeConfig;return t&&t.path===""}function Gi(r){let t=[],e=new Set;for(let i of r){if(!Is(i)){t.push(i);continue}let n=t.find(s=>i.value.routeConfig===s.value.routeConfig);n!==void 0?(n.children.push(...i.children),e.add(n)):t.push(i)}for(let i of e){let n=Gi(i.children);t.push(new _(i.value,n))}return t.filter(i=>!e.has(i))}function Si(r){return r.data||{}}function yi(r){return r.resolve||{}}function Ms(r,t,e,i,n,s){return x(o=>bs(r,t,e,i,o.extractedUrl,n,s).pipe(v(({state:l,tree:a})=>y(c({},o),{targetSnapshot:l,urlAfterRedirects:a}))))}function As(r,t){return x(e=>{let{targetSnapshot:i,guards:{canActivateChecks:n}}=e;if(!n.length)return h(e);let s=new Set(n.map(a=>a.route)),o=new Set;for(let a of s)if(!o.has(a))for(let u of Qi(a))o.add(u);let l=0;return D(o).pipe(ae(a=>s.has(a)?Es(a,i,r,t):(a.data=vt(a,a.parent,r).resolve,h(void 0))),g(()=>l++),$t(1),x(a=>l===o.size?h(e):z))})}function Qi(r){let t=r.children.map(e=>Qi(e)).flat();return[r,...t]}function Es(r,t,e,i){let n=r.routeConfig,s=r._resolve;return n?.title!==void 0&&!Fi(n)&&(s[qe]=n.title),Os(s,r,t,i).pipe(v(o=>(r._resolvedData=o,r.data=vt(r,r.parent,e).resolve,null)))}function Os(r,t,e,i){let n=Gt(r);if(n.length===0)return h({});let s={};return D(n).pipe(x(o=>Ts(r[o],t,e,i).pipe(Z(),g(l=>{if(l instanceof je)throw wt(new me,l);s[o]=l}))),$t(1),Or(s),m(o=>Vi(o)?z:S(o)))}function Ts(r,t,e,i){let n=Ve(t)??i,s=Re(r,n),o=s.resolve?s.resolve(t,e):H(n,()=>s(t,e));return te(o)}function Ht(r){return U(t=>{let e=r(t);return e?D(e).pipe(v(()=>t)):h(t)})}var Yi=(()=>{class r{buildTitle(e){let i,n=e.root;for(;n!==void 0;)i=this.getResolvedTitleForRoute(n)??i,n=n.children.find(s=>s.outlet===w);return i}getResolvedTitleForRoute(e){return e.data[qe]}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=R({token:r,factory:()=>d(Ds),providedIn:"root"})}}return r})(),Ds=(()=>{class r extends Yi{constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||r)(G(hi))}}static{this.\u0275prov=R({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),Ge=new L("",{providedIn:"root",factory:()=>({})}),$s=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275cmp=_r({type:r,selectors:[["ng-component"]],standalone:!0,features:[ei],decls:1,vars:0,template:function(i,n){i&1&&Yr(0,"router-outlet")},dependencies:[Fn],encapsulation:2})}}return r})();function Sr(r){let t=r.children&&r.children.map(Sr),e=t?y(c({},r),{children:t}):c({},r);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==w&&(e.component=$s),e}var ze=new L(""),yr=(()=>{class r{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=d(tt)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return h(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let i=te(e.loadComponent()).pipe(v(Ki),g(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),Ze(()=>{this.componentLoaders.delete(e)})),n=new Ot(i,()=>new T).pipe(Et());return this.componentLoaders.set(e,n),n}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return h({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=Ps(i,this.compiler,e,this.onLoadEndListener).pipe(Ze(()=>{this.childrenLoaders.delete(i)})),o=new Ot(s,()=>new T).pipe(Et());return this.childrenLoaders.set(i,o),o}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=R({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function Ps(r,t,e,i){return te(r.loadChildren()).pipe(v(Ki),x(n=>n instanceof Wr||Array.isArray(n)?h(n):D(t.compileModuleAsync(n))),v(n=>{i&&i(r);let s,o,l=!1;return Array.isArray(n)?(o=n,l=!0):(s=n.create(e).injector,o=s.get(ze,[],{optional:!0,self:!0}).flat()),{routes:o.map(Sr),injector:s}}))}function Ns(r){return r&&typeof r=="object"&&"default"in r}function Ki(r){return Ns(r)?r.default:r}var Rr=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=R({token:r,factory:()=>d(xs),providedIn:"root"})}}return r})(),xs=(()=>{class r{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=R({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),Ji=new L(""),Zi=new L("");function Ls(r,t,e){let i=r.get(Zi),n=r.get(oi);return r.get(Lt).runOutsideAngular(()=>{if(!n.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(u=>setTimeout(u));let s,o=new Promise(u=>{s=u}),l=n.startViewTransition(()=>(s(),_s(r))),{onViewTransitionCreated:a}=i;return a&&H(r,()=>a({transition:l,from:t,to:e})),o})}function _s(r){return new Promise(t=>{Gr({read:()=>setTimeout(t)},{injector:r})})}var js=new L(""),br=(()=>{class r{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new T,this.transitionAbortSubject=new T,this.configLoader=d(yr),this.environmentInjector=d(Ie),this.urlSerializer=d(Be),this.rootContexts=d(He),this.location=d(Ae),this.inputBindingEnabled=d(Rt,{optional:!0})!==null,this.titleStrategy=d(Yi),this.options=d(Ge,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=d(Rr),this.createViewTransition=d(Ji,{optional:!0}),this.navigationErrorHandler=d(js,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>h(void 0),this.rootComponentType=null;let e=n=>this.events.next(new tr(n)),i=n=>this.events.next(new rr(n));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;this.transitions?.next(y(c(c({},this.transitions.value),e),{id:i}))}setupNavigations(e,i,n){return this.transitions=new A({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:$e,restoredState:null,currentSnapshot:n.snapshot,targetSnapshot:null,currentRouterState:n,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(re(s=>s.id!==0),v(s=>y(c({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),U(s=>{let o=!1,l=!1;return h(s).pipe(U(a=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",j.SupersededByNewNavigation),z;this.currentTransition=s,this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?y(c({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=a.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!u&&p!=="reload"){let f="";return this.events.next(new X(a.id,this.urlSerializer.serialize(a.rawUrl),f,ht.IgnoredSameUrlNavigation)),a.resolve(!1),z}if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return h(a).pipe(U(f=>{let C=this.transitions?.getValue();return this.events.next(new we(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),C!==this.transitions?.getValue()?z:Promise.resolve(f)}),Ms(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),g(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=y(c({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let C=new dt(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(C)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:f,extractedUrl:C,source:N,restoredState:E,extras:J}=a,F=new we(f,this.urlSerializer.serialize(C),N,E);this.events.next(F);let Ce=ji(this.rootComponentType).snapshot;return this.currentTransition=s=y(c({},a),{targetSnapshot:Ce,urlAfterRedirects:C,extras:y(c({},J),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=C,h(s)}else{let f="";return this.events.next(new X(a.id,this.urlSerializer.serialize(a.extractedUrl),f,ht.IgnoredByUrlHandlingStrategy)),a.resolve(!1),z}}),g(a=>{let u=new Jt(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),v(a=>(this.currentTransition=s=y(c({},a),{guards:Wn(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),s)),is(this.environmentInjector,a=>this.events.next(a)),g(a=>{if(s.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw wt(this.urlSerializer,a.guardsResult);let u=new Zt(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.events.next(u)}),re(a=>a.guardsResult?!0:(this.cancelNavigationTransition(a,"",j.GuardRejected),!1)),Ht(a=>{if(a.guards.canActivateChecks.length)return h(a).pipe(g(u=>{let p=new Xt(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(p)}),U(u=>{let p=!1;return h(u).pipe(As(this.paramsInheritanceStrategy,this.environmentInjector),g({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(u,"",j.NoDataFromResolver)}}))}),g(u=>{let p=new er(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(p)}))}),Ht(a=>{let u=p=>{let f=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(p.routeConfig).pipe(g(C=>{p.component=C}),v(()=>{})));for(let C of p.children)f.push(...u(C));return f};return Ke(u(a.targetSnapshot.root)).pipe(Dt(null),le(1))}),Ht(()=>this.afterPreactivation()),U(()=>{let{currentSnapshot:a,targetSnapshot:u}=s,p=this.createViewTransition?.(this.environmentInjector,a.root,u.root);return p?D(p).pipe(v(()=>s)):h(s)}),v(a=>{let u=zn(e.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return this.currentTransition=s=y(c({},a),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),g(()=>{this.events.next(new Le)}),Hn(this.rootContexts,e.routeReuseStrategy,a=>this.events.next(a),this.inputBindingEnabled),le(1),g({next:a=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new V(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)},complete:()=>{o=!0}}),ue(this.transitionAbortSubject.pipe(g(a=>{throw a}))),Ze(()=>{!o&&!l&&this.cancelNavigationTransition(s,"",j.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),m(a=>{if(l=!0,Bi(a))this.events.next(new Q(s.id,this.urlSerializer.serialize(s.extractedUrl),a.message,a.cancellationCode)),Vn(a)?this.events.next(new Se(a.url,a.navigationBehaviorOptions)):s.resolve(!1);else{let u=new xe(s.id,this.urlSerializer.serialize(s.extractedUrl),a,s.targetSnapshot??void 0);try{let p=H(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(p instanceof je){let{message:f,cancellationCode:C}=wt(this.urlSerializer,p);this.events.next(new Q(s.id,this.urlSerializer.serialize(s.extractedUrl),f,C)),this.events.next(new Se(p.redirectTo,p.navigationBehaviorOptions))}else{this.events.next(u);let f=e.errorHandler(a);s.resolve(!!f)}}catch(p){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(p)}}return z}))}))}cancelNavigationTransition(e,i,n){let s=new Q(e.id,this.urlSerializer.serialize(e.extractedUrl),i,n);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=R({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function ks(r){return r!==$e}var Fs=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=R({token:r,factory:()=>d(zs),providedIn:"root"})}}return r})(),mr=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},zs=(()=>{class r extends mr{static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=Nt(r)))(n||r)}})()}static{this.\u0275prov=R({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),Xi=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=R({token:r,factory:()=>d(qs),providedIn:"root"})}}return r})(),qs=(()=>{class r extends Xi{constructor(){super(...arguments),this.location=d(Ae),this.urlSerializer=d(Be),this.options=d(Ge,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=d(Rr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Y,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=ji(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&e(i.url,i.state)})}handleRouterEvent(e,i){if(e instanceof we)this.stateMemento=this.createStateMemento();else if(e instanceof X)this.rawUrlTree=i.initialUrl;else if(e instanceof dt){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let n=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??n,i)}}else e instanceof Le?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):e instanceof Q&&(e.code===j.GuardRejected||e.code===j.NoDataFromResolver)?this.restoreHistory(i):e instanceof xe?this.restoreHistory(i,!0):e instanceof V&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,i){let n=e instanceof Y?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(n)||i.extras.replaceUrl){let s=this.browserPageId,o=c(c({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(n,"",o)}else{let s=c(c({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(n,"",s)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let n=this.browserPageId,s=this.currentPageId-n;s!==0?this.location.historyGo(s):this.currentUrlTree===e.finalUrl&&s===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=Nt(r)))(n||r)}})()}static{this.\u0275prov=R({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),Te=function(r){return r[r.COMPLETE=0]="COMPLETE",r[r.FAILED=1]="FAILED",r[r.REDIRECTING=2]="REDIRECTING",r}(Te||{});function en(r,t){r.events.pipe(re(e=>e instanceof V||e instanceof Q||e instanceof xe||e instanceof X),v(e=>e instanceof V||e instanceof X?Te.COMPLETE:(e instanceof Q?e.code===j.Redirect||e.code===j.SupersededByNewNavigation:!1)?Te.REDIRECTING:Te.FAILED),re(e=>e!==Te.REDIRECTING),le(1)).subscribe(()=>{t()})}function Bs(r){throw r}var Vs={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Hs={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},P=(()=>{class r{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=d(ti),this.stateManager=d(Xi),this.options=d(Ge,{optional:!0})||{},this.pendingTasks=d(zr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=d(br),this.urlSerializer=d(Be),this.location=d(Ae),this.urlHandlingStrategy=d(Rr),this._events=new T,this.errorHandler=this.options.errorHandler||Bs,this.navigated=!1,this.routeReuseStrategy=d(Fs),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=d(ze,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!d(Rt,{optional:!0}),this.eventsSubscription=new Ur,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let n=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(n!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Q&&i.code!==j.Redirect&&i.code!==j.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof V)this.navigated=!0;else if(i instanceof Se){let o=i.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(i.url,n.currentRawUrl),a=c({browserUrl:n.extras.browserUrl,info:n.extras.info,skipLocationChange:n.extras.skipLocationChange,replaceUrl:n.extras.replaceUrl||this.urlUpdateStrategy==="eager"||ks(n.source)},o);this.scheduleNavigation(l,$e,null,a,{resolve:n.resolve,reject:n.reject,promise:n.promise})}}Gs(i)&&this._events.next(i)}catch(n){this.navigationTransitions.transitionAbortSubject.next(n)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),$e,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",i)},0)})}navigateToSyncWithBrowser(e,i,n){let s={replaceUrl:!0},o=n?.navigationId?n:null;if(n){let a=c({},n);delete a.navigationId,delete a.\u0275routerPageId,Object.keys(a).length!==0&&(s.state=a)}let l=this.parseUrl(e);this.scheduleNavigation(l,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Sr),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:n,queryParams:s,fragment:o,queryParamsHandling:l,preserveFragment:a}=i,u=a?this.currentUrlTree.fragment:o,p=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":p=c(c({},this.currentUrlTree.queryParams),s);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}p!==null&&(p=this.removeEmptyProps(p));let f;try{let C=n?n.snapshot:this.routerState.snapshot.root;f=Ni(C)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),f=this.currentUrlTree.root}return xi(f,e,p,u??null)}navigateByUrl(e,i={skipLocationChange:!1}){let n=se(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(s,$e,null,i)}navigate(e,i={skipLocationChange:!1}){return Ws(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let n;if(i===!0?n=c({},Vs):i===!1?n=c({},Hs):n=i,se(e))return pi(this.currentUrlTree,e,n);let s=this.parseUrl(e);return pi(this.currentUrlTree,s,n)}removeEmptyProps(e){return Object.entries(e).reduce((i,[n,s])=>(s!=null&&(i[n]=s),i),{})}scheduleNavigation(e,i,n,s,o){if(this.disposed)return Promise.resolve(!1);let l,a,u;o?(l=o.resolve,a=o.reject,u=o.promise):u=new Promise((f,C)=>{l=f,a=C});let p=this.pendingTasks.add();return en(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:l,reject:a,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=R({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function Ws(r){for(let t=0;t<r.length;t++)if(r[t]==null)throw new O(4008,!1)}function Gs(r){return!(r instanceof Le)&&!(r instanceof Se)}var Ri=(()=>{class r{constructor(e,i,n,s,o,l){this.router=e,this.route=i,this.tabIndexAttribute=n,this.renderer=s,this.el=o,this.locationStrategy=l,this.href=null,this.onChanges=new T,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let a=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=a==="a"||a==="area",this.isAnchorElement?this.subscription=e.events.subscribe(u=>{u instanceof V&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(se(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,i,n,s,o){let l=this.urlTree;if(l===null||this.isAnchorElement&&(e!==0||i||n||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let a={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,a),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let i=this.href===null?null:qr(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(e,i){let n=this.renderer,s=this.el.nativeElement;i!==null?n.setAttribute(s,e,i):n.removeAttribute(s,e)}get urlTree(){return this.routerLinkInput===null?null:se(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(i){return new(i||r)(q(P),q(ee),Fr("tabindex"),q(jt),q(_t),q(Me))}}static{this.\u0275dir=Xe({type:r,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,n){i&1&&Kr("click",function(o){return n.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),i&2&&Qr("target",n.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",it],skipLocationChange:[2,"skipLocationChange","skipLocationChange",it],replaceUrl:[2,"replaceUrl","replaceUrl",it],routerLink:"routerLink"},standalone:!0,features:[Hr,et]})}}return r})(),Do=(()=>{class r{get isActive(){return this._isActive}constructor(e,i,n,s,o){this.router=e,this.element=i,this.renderer=n,this.cdr=s,this.link=o,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new ce,this.routerEventsSubscription=e.events.subscribe(l=>{l instanceof V&&this.update()})}ngAfterContentInit(){h(this.links.changes,h(null)).pipe(Ue()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=D(e).pipe(Ue()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(e){let i=Array.isArray(e)?e:e.split(" ");this.classes=i.filter(n=>!!n)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(i=>{e?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let i=Qs(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return n=>{let s=n.urlTree;return s?e.isActive(s,i):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static{this.\u0275fac=function(i){return new(i||r)(q(P),q(_t),q(jt),q(rt),q(Ri,8))}}static{this.\u0275dir=Xe({type:r,selectors:[["","routerLinkActive",""]],contentQueries:function(i,n,s){if(i&1&&Jr(s,Ri,5),i&2){let o;Zr(o=Xr())&&(n.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[et]})}}return r})();function Qs(r){return!!r.paths}var yt=class{};var Ys=(()=>{class r{constructor(e,i,n,s,o){this.router=e,this.injector=n,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(re(e=>e instanceof V),ae(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){let n=[];for(let s of i){s.providers&&!s._injector&&(s._injector=kt(s.providers,e,`Route: ${s.path}`));let o=s._injector??e,l=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&n.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&n.push(this.processRoutes(l,s.children??s._loadedRoutes))}return D(n).pipe(Ue())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let n;i.loadChildren&&i.canLoad===void 0?n=this.loader.loadChildren(e,i):n=h(null);let s=n.pipe(x(o=>o===null?h(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));if(i.loadComponent&&!i._loadedComponent){let o=this.loader.loadComponent(i);return D([s,o]).pipe(Ue())}else return s})}static{this.\u0275fac=function(i){return new(i||r)(G(P),G(tt),G(Ie),G(yt),G(yr))}}static{this.\u0275prov=R({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),tn=new L(""),Ks=(()=>{class r{constructor(e,i,n,s,o={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=n,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof we?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof V?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof X&&e.code===ht.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof pt&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new pt(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){Br()}}static{this.\u0275prov=R({token:r,factory:r.\u0275fac})}}return r})();function $o(r,...t){return kr([{provide:ze,multi:!0,useValue:r},[],{provide:ee,useFactory:rn,deps:[P]},{provide:zt,multi:!0,useFactory:nn},t.map(e=>e.\u0275providers)])}function rn(r){return r.routerState.root}function Qe(r,t){return{\u0275kind:r,\u0275providers:t}}function nn(){let r=d(xt);return t=>{let e=r.get(ii);if(t!==e.components[0])return;let i=r.get(P),n=r.get(sn);r.get(Cr)===1&&i.initialNavigation(),r.get(on,null,Pt.Optional)?.setUpPreloading(),r.get(tn,null,Pt.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),n.closed||(n.next(),n.complete(),n.unsubscribe())}}var sn=new L("",{factory:()=>new T}),Cr=new L("",{providedIn:"root",factory:()=>1});function Js(){return Qe(2,[{provide:Cr,useValue:0},{provide:Ft,multi:!0,deps:[xt],useFactory:t=>{let e=t.get(ai,Promise.resolve());return()=>e.then(()=>new Promise(i=>{let n=t.get(P),s=t.get(sn);en(n,()=>{i(!0)}),t.get(br).afterPreactivation=()=>(i(!0),s.closed?h(void 0):s),n.initialNavigation()}))}}])}function Zs(){return Qe(3,[{provide:Ft,multi:!0,useFactory:()=>{let t=d(P);return()=>{t.setUpLocationChangeListener()}}},{provide:Cr,useValue:2}])}var on=new L("");function Xs(r){return Qe(0,[{provide:on,useExisting:Ys},{provide:yt,useExisting:r}])}function eo(){return Qe(8,[mi,{provide:Rt,useExisting:mi}])}function to(r){let t=[{provide:Ji,useValue:Ls},{provide:Zi,useValue:c({skipNextTransition:!!r?.skipInitialTransition},r)}];return Qe(9,t)}var bi=new L("ROUTER_FORROOT_GUARD"),ro=[Ae,{provide:Be,useClass:me},P,He,{provide:ee,useFactory:rn,deps:[P]},yr,[]],Po=(()=>{class r{constructor(e){}static forRoot(e,i){return{ngModule:r,providers:[ro,[],{provide:ze,multi:!0,useValue:e},{provide:bi,useFactory:oo,deps:[[P,new xr,new Lr]]},{provide:Ge,useValue:i||{}},i?.useHash?no():so(),io(),i?.preloadingStrategy?Xs(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?ao(i):[],i?.bindToComponentInputs?eo().\u0275providers:[],i?.enableViewTransitions?to().\u0275providers:[],lo()]}}static forChild(e){return{ngModule:r,providers:[{provide:ze,multi:!0,useValue:e}]}}static{this.\u0275fac=function(i){return new(i||r)(G(bi,8))}}static{this.\u0275mod=jr({type:r})}static{this.\u0275inj=Pr({})}}return r})();function io(){return{provide:tn,useFactory:()=>{let r=d(ci),t=d(Lt),e=d(Ge),i=d(br),n=d(Be);return e.scrollOffset&&r.setOffset(e.scrollOffset),new Ks(n,i,r,t,e)}}}function no(){return{provide:Me,useClass:ui}}function so(){return{provide:Me,useClass:li}}function oo(r){return"guarded"}function ao(r){return[r.initialNavigation==="disabled"?Zs().\u0275providers:[],r.initialNavigation==="enabledBlocking"?Js().\u0275providers:[]]}var Ci=new L("");function lo(){return[{provide:Ci,useFactory:nn},{provide:zt,multi:!0,useExisting:Ci}]}var Ct=class r{api=d($);jsonMovies=b([]);genreMovies=b({});trendingMovies=b([]);trendingTV=b([]);upcoming=b([]);similarMovies=b([]);videos=b([]);loading=b(!1);error=b(null);fetchTMDBMovieData(t){return this.api.getTMDB(t).pipe(m(e=>(console.error("Error fetching TMDB data:",e),h(null))))}fetchVideo(t,e){if(!t)return console.error("movie_id is undefined"),h([]);let i=e==="tv"?`/tv/${t}/videos?language=en-US`:`/movie/${t}/videos?language=en-US`;return this.api.getTMDB(i).pipe(v(n=>n.results||[]),m(n=>(console.error("Error fetching video data:",n),h([]))))}postMovieToJson(t){try{let e=new Date().toISOString(),i={id:String(t.id),title:t.title,media_type:t.media_type||"movie",poster:t.poster_path,backdrop:t.backdrop_path,released:t.release_date||t.first_air_date,createdAt:e,updatedAt:e};return this.api.get("/movies","http://localhost:3001").pipe(U(n=>{let s=n.find(o=>o.id===t.id);return s?this.api.put(`/movies/${s.id}`,y(c({},i),{createdAt:s.createdAt}),"http://localhost:3001"):this.api.post("/movies",i,"http://localhost:3001")}),m(n=>{throw console.error("Error posting movie to JSON:",n),n}))}catch(e){return console.error("Error in postMovieToJson:",e),h({})}}fetchJSONMovies(){return this.loading.set(!0),this.api.get("/movies","http://localhost:3001").pipe(g(t=>{this.jsonMovies.set(t),this.loading.set(!1)}),m(t=>(this.loading.set(!1),this.error.set(t.message),h([]))))}fetchMoviesByGenre(t){return this.loading.set(!0),this.api.getTMDB(`/discover/movie?with_genres=${t}&include_adult=false&include_video=true&language=en-US`).pipe(v(e=>e.results||[]),g(e=>{let i=this.genreMovies();this.genreMovies.set(y(c({},i),{[t]:e})),this.loading.set(!1)}),m(e=>(this.loading.set(!1),this.error.set(e.message),h([]))))}fetchTrendingMovies(){return this.loading.set(!0),this.api.getTMDB("/trending/movie/week?include_adult=false&include_video=true&language=en-US").pipe(v(t=>t.results||[]),g(t=>{this.trendingMovies.set(t),this.loading.set(!1)}),m(t=>(this.loading.set(!1),this.error.set(t.message),h([]))))}fetchTrendingTV(){return this.loading.set(!0),this.api.getTMDB("/trending/tv/day?language=en-US").pipe(v(t=>t.results||[]),g(t=>{this.trendingTV.set(t),this.loading.set(!1)}),m(t=>(this.loading.set(!1),this.error.set(t.message),h([]))))}fetchUpcoming(){this.loading.set(!0);let t=new Date().toISOString().split("T")[0],e=new Date;e.setMonth(e.getMonth()+3);let i=e.toISOString().split("T")[0];return this.api.getTMDB(`/discover/movie?include_adult=false&include_video=true&language=en-US&page=1&primary_release_date.gte=${t}&primary_release_date.lte=${i}&release_date.gte=${t}&release_date.lte=${i}&sort_by=popularity.desc`).pipe(v(n=>n.results||[]),g(n=>{this.upcoming.set(n),this.loading.set(!1)}),m(n=>(this.loading.set(!1),this.error.set(n.message),h([]))))}fetchSimilarMovies(t,e="movie"){return this.loading.set(!0),this.api.getTMDB(e==="movie"?`/movie/${t}/similar?language=en-US&page=1`:`/tv/${t}/similar?language=en-US&page=1`).pipe(v(i=>i.results||[]),g(i=>{this.similarMovies.set(i),this.loading.set(!1)}),m(i=>(this.loading.set(!1),this.error.set(i.message),h([]))))}fetchVideos(t,e){return this.loading.set(!0),this.fetchVideo(t,e).pipe(g(i=>{this.videos.set(i),this.loading.set(!1)}),m(i=>(this.loading.set(!1),this.error.set(i.message),h([]))))}fetchCast(t,e){if(!t)return console.error("movie id is undefined"),h([]);if(!e)return console.error("media type is undefined"),h([]);let i=e==="tv"?`/tv/${t}/credits?language=en-US`:`/movie/${t}/credits?language=en-US'`;return this.api.getTMDB(i).pipe(v(n=>n.cast??[]),m(n=>(console.error("Error fetching video data:",n),h([]))))}fetchMovieDetails(t,e){if(!t||!e)return console.error("movieId or mediaType is undefined"),h(null);let i=e==="tv"?`/tv/${t}?language=en-US`:`/movie/${t}?language=en-US`;return this.api.getTMDB(i).pipe(v(n=>y(c({},n),{media_type:e})),m(n=>(console.error("Error fetching movie details:",n),h(null))))}performSearch(t,e){let i="";switch(t){case"Title":i=`/search/multi?query=${encodeURIComponent(e)}`;break;case"Genre":i=`/discover/movie?with_genres=${encodeURIComponent(e)}`;break;case"Director":case"Actor":i=`/search/person?query=${encodeURIComponent(e)}`;break;case"Year":i=`/discover/movie?primary_release_year=${encodeURIComponent(e)}`;break;default:return S(()=>new Error("Invalid search type"))}return this.api.getTMDB(i).pipe(v(n=>{if(n.results){let o=function(l,a){if(a.release_date!==l.release_date){let f=new Date(l.release_date||l.first_air_date||0);return new Date(a.release_date||a.first_air_date||0).getTime()-f.getTime()}let u=l.popularity?l.popularity:0;return(a.popularity?a.popularity:0)-u};var s=o;if(t==="Title"||t==="Genre"||t==="Year")return n.results.filter(a=>a.media_type!=="person").sort(o).map(a=>c({label:a.title||a.name},a));if(t==="Director"||t==="Actor"){let l=[];return n.results.forEach(u=>{t==="Actor"&&u.known_for_department==="Acting"&&Array.isArray(u.known_for)&&u.known_for.forEach(p=>{l.push(p)}),t==="Director"&&u.known_for_department==="Directing"&&Array.isArray(u.known_for)&&u.known_for.forEach(p=>{l.push(p)})}),l.length===0?[]:l.sort(o).map(u=>c({label:u.title||u.name},u))}}return[]}),m(n=>(console.error("Error fetching movies:",n),h(null))))}static \u0275fac=function(e){return new(e||r)};static \u0275prov=R({token:r,factory:r.\u0275fac,providedIn:"root"})};var Ut=class r{isBrowser=typeof window<"u";getItem(t){try{if(this.isBrowser){let e=localStorage.getItem(t);return e?JSON.parse(e):null}return null}catch(e){return console.error("Error parsing stored value:",e),null}}setItem(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(i){console.error("Error storing value:",i)}}removeItem(t){try{localStorage.removeItem(t)}catch(e){console.error("Error removing value:",e)}}createStorageSignal(t,e=null){let i=this.getItem(t)??e,n=b(i);return this.isBrowser&&window.addEventListener("storage",s=>{if(s.key===t)try{let o=s.newValue?JSON.parse(s.newValue):null;n.set(o)}catch(o){console.error("Error parsing stored value:",o)}}),{get:()=>n(),set:s=>{s===null?this.removeItem(t):this.setItem(t,s),n.set(s)},asReadonly:()=>n.asReadonly()}}createSessionStorageSignal(t,e=null){let i=this.isBrowser?sessionStorage.getItem(t):null,s=(i?JSON.parse(i):null)??e,o=b(s);return this.isBrowser&&window.addEventListener("storage",l=>{if(l.storageArea===sessionStorage&&l.key===t)try{let a=l.newValue?JSON.parse(l.newValue):null;o.set(a)}catch(a){console.error("SessionStorage parse error:",a)}}),{get:()=>o(),set:l=>{l===null?sessionStorage.removeItem(t):sessionStorage.setItem(t,JSON.stringify(l)),o.set(l)},asReadonly:()=>o.asReadonly()}}static \u0275fac=function(e){return new(e||r)};static \u0275prov=R({token:r,factory:r.\u0275fac,providedIn:"root"})};var It=class r{intervalSub=null;api=d($);router=d(P);start(t){this.stop(),t&&(this.intervalSub=Je(5e3).pipe(U(()=>this.api.get(`/users/${t.id}`,di.API_URL).pipe(m(e=>(console.error("Error checking ban status:",e),h(null)))))).subscribe(e=>{e?.suspended&&(localStorage.removeItem("user"),sessionStorage.removeItem("user"),alert("Your account has been suspended. You have been logged out."),this.router.navigate(["/login"]))}))}stop(){this.intervalSub?.unsubscribe(),this.intervalSub=null}static \u0275fac=function(e){return new(e||r)};static \u0275prov=R({token:r,factory:r.\u0275fac,providedIn:"root"})};var be=class r{AUTH_TOKEN_KEY="secret_auth_token";_isAuthenticated=b(!1);_isLoading=b(!1);error=b(null);isAuthenticated=this._isAuthenticated.asReadonly();isLoading=this._isLoading.asReadonly();errorMessage=this.error.asReadonly();api=d($);localStorageService=d(Ut);router=d(P);banService=d(It);localStorageUser=this.localStorageService.createStorageSignal("user");localStorageToken=this.localStorageService.createStorageSignal("auth");sessionStorageUser=this.localStorageService.createSessionStorageSignal("user");sessionStorageToken=this.localStorageService.createSessionStorageSignal("auth");localStorageAdmin=this.localStorageService.createStorageSignal("admin");sessionStorageAdmin=this.localStorageService.createSessionStorageSignal("admin");userSubject=new A(this.getStoredUser());user$=this.userSubject.asObservable();getStoredUser(){return this.localStorageUser.get()||this.sessionStorageUser.get()}setStoredUser(t){this.sessionStorageUser.get()?this.sessionStorageUser.set(t):this.localStorageUser.get()?this.localStorageUser.set(t):this.sessionStorageAdmin.get()?this.sessionStorageAdmin.set(t):this.localStorageAdmin.get()&&this.localStorageAdmin.set(t)}getUser(){return this.userSubject.getValue()}getAdmin(){return this.localStorageAdmin.get()||this.sessionStorageAdmin.get()}isLoggedIn(){return this.localStorageUser.get()||this.sessionStorageUser.get()}isAdminLoggedIn(){return this.localStorageAdmin.get()||this.sessionStorageAdmin.get()}registerUser(t){return this._isLoading.set(!0),this.api.get("/users").pipe(U(e=>e.find(n=>n.email===t.email)?S(()=>new Error("An account with this email already exists.")):this.api.post("/users",t)),g(e=>(this._isLoading.set(!1),e)),m(e=>(this._isLoading.set(!1),this.error.set(e.message||"Sign up failed! Please try again later."),S(()=>new Error("Sign up failed! Please try again later.")))))}loginUser(t,e){return this._isLoading.set(!0),this.api.get(`/users?email=${t.email}`).pipe(v(i=>{if(!i||i.length===0)throw new Error("User not found!");let n=i[0];if(n.suspended)throw new Error("Your account has been suspended!");if(n.password!==t.password)throw new Error("Incorrect password!");return{id:n.id,name:n.firstName+" "+n.lastName,email:n.email,image:n.image||null}}),g(i=>{this._isAuthenticated.set(!0),this._isLoading.set(!1),e?(this.localStorageUser.set(i),this.localStorageToken.set(this.AUTH_TOKEN_KEY)):(this.sessionStorageUser.set(i),this.sessionStorageToken.set(this.AUTH_TOKEN_KEY)),this.userSubject.next(i)}),m(i=>(this._isLoading.set(!1),this.error.set(i.message||"Sign in failed! Please try again later."),S(()=>new Error("Sign in failed! Please try again later.")))))}loginAdmin(t,e){return this._isLoading.set(!0),this.api.get(`/admin?email=${t.email}`).pipe(v(i=>{if(!i||i.length===0)throw new Error("User not found!");let n=i[0];if(n.suspended)throw new Error("Your account has been suspended!");if(n.password!==t.password)throw new Error("Incorrect password!");if(n.pin!==t.pin)throw new Error("Incorrect pin!");return{id:n.id,name:n.firstName+" "+n.lastName,email:n.email,image:n.image||null}}),g(i=>{this._isAuthenticated.set(!0),this._isLoading.set(!1),e?(this.localStorageAdmin.set(i),this.localStorageToken.set(this.AUTH_TOKEN_KEY)):(this.sessionStorageAdmin.set(i),this.sessionStorageToken.set(this.AUTH_TOKEN_KEY))}),m(i=>(this._isLoading.set(!1),this.error.set(i.message||"Sign in failed! Please try again later."),S(()=>new Error("Sign in failed! Please try again later.")))))}logout(){this._isAuthenticated.set(!1),this.isAdminLoggedIn()?(this.localStorageAdmin.set(null),this.localStorageToken.set(null),this.sessionStorageAdmin.set(null),this.router.navigate(["/admin-sign-in"])):this.isLoggedIn()&&(this.localStorageUser.set(null),this.localStorageToken.set(null),this.sessionStorageUser.set(null),this.sessionStorageToken.set(null),this.banService.stop(),this.router.navigate(["/sign-in"]))}updateProfile(t,e="users"){let i=this.localStorageUser.get()||this.sessionStorageUser.get();return i?.id?(this._isLoading.set(!0),this.api.patch(`/${e}/${i.id}`,t).pipe(v(n=>({id:n.id,name:n.firstName+" "+n.lastName,email:n.email,image:n.image||null})),g(n=>{this._isLoading.set(!1),e==="users"&&this.localStorageUser.set(n)}),m(n=>(this._isLoading.set(!1),this.error.set(n.message||"User profile update failed! Please try again later."),S(()=>new Error("User profile update failed! Please try again later.")))))):S(()=>new Error("User id is missing"))}updateUserProfileImage(t,e){let i=new FormData;return i.append("file",e),i.append("userId",t),this.api.post("/upload",i).pipe(U(n=>this.api.patch(`/users/${t}`,{image:n.path})),g(n=>{let s=this.getStoredUser();if(s){let o=y(c({},s),{image:n.image});this.setStoredUser(o),this.userSubject.next(o)}}))}updatePassword(t,e){let i=this.localStorageUser.get()||this.sessionStorageUser.get();return i?.email?(this._isLoading.set(!0),this.api.get(`/users?email=${i.email}&password=${t}`).pipe(U(n=>!n||n.length===0?S(()=>new Error("Current password is incorrect")):this.updateProfile({password:e})),g(()=>this._isLoading.set(!1)),m(n=>(this._isLoading.set(!1),this.error.set(n.message||"Password update failed"),S(()=>n))))):S(()=>new Error("User email is missing"))}deleteProfile(t){this._isLoading.set(!0);let e=this.localStorageUser.get()||this.sessionStorageUser.get();return e?.email?this.api.get(`/users?email=${encodeURIComponent(e.email)}&password=${encodeURIComponent(t)}`).pipe(U(i=>{let n=i[0];if(!n)throw new Error("Incorrect password. Account deletion canceled.");return this.api.post("/archived-users",n).pipe(U(()=>this.api.delete(`/users/${n.id}`)))}),v(()=>{}),g(()=>{this._isLoading.set(!1),this.localStorageUser.set(null),this.localStorageToken.set(null)}),m(i=>(this._isLoading.set(!1),this.error.set(i.message||"Account deletion failed! Please try again later."),S(()=>new Error("Account deletion failed! Please try again later."))))):(this._isLoading.set(!1),S(()=>new Error("No user is currently logged in.")))}fetchUserData(){let t=this.localStorageUser.get(),e=this.sessionStorageUser.get(),i=t||e;if(!i?.id)return S(()=>new Error("No identifier provided!"));this._isLoading.set(!0);let n=`/users/${i.id}`;return this.api.get(n).pipe(v(s=>{let o=Array.isArray(s)?s[0]:s;if(!o)throw new Error("User not found!");return o}),g(()=>{this._isLoading.set(!1)}),m(s=>(this._isLoading.set(!1),this.error.set(s.message||"Failed to fetch user data."),S(()=>new Error(s.message||"Failed to fetch user data.")))))}static \u0275fac=function(e){return new(e||r)};static \u0275prov=R({token:r,factory:r.\u0275fac,providedIn:"root"})};var an=class r{api=d($);movieService=d(Ct);authService=d(be);localStorageUser=null;currentUser=b(null);allUsers=b([]);loading=b(!1);error=b(null);refetchUserSubject=new T;destroy$=new T;refetchRequested$=this.refetchUserSubject.asObservable();constructor(){this.authService.user$.pipe(ue(this.destroy$)).subscribe(t=>{if(!t){this.localStorageUser=null;return}this.localStorageUser=t})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}triggerRefetch(t){this.refetchUserSubject.next(t)}fetchUserData(){return!this.localStorageUser||!this.localStorageUser.email?S(()=>new Error("No user found")):(this.loading.set(!0),this.api.get(`/users?email=${this.localStorageUser.email}`).pipe(v(t=>{if(!t||t.length===0)throw new Error("User not found");let e=t[0];return{id:e.id,firstName:e.firstName,lastName:e.lastName,email:e.email,image:e.image||"",moviePreferences:e.moviePreferences||[],favorites:e.favorites||[],watchlist:e.watchlist||[],watchedList:e.watchedList||[],following:e.following||[],followers:e.followers||[],privilege:e.privilege||null}}),g(t=>{this.loading.set(!1),this.currentUser.set(t)}),m(t=>(console.error("Error fetching user data:",t),this.loading.set(!1),this.error.set(t.message||"Failed to fetch user data"),S(()=>new Error("Failed to fetch user data"))))))}fetchUsersData(){return this.loading.set(!0),this.api.get("/users").pipe(v(t=>t.map(e=>({id:e.id,firstName:e.firstName,lastName:e.lastName,email:e.email,image:e.image||"",moviePreferences:e.moviePreferences||[],favorites:e.favorites||[],watchlist:e.watchlist||[],watchedList:e.watchedList||[],following:e.following||[],followers:e.followers||[],suspended:e.suspended||!1,privilege:e.privilege||null}))),g(t=>{this.loading.set(!1),this.allUsers.set(t)}),m(t=>(this.loading.set(!1),this.error.set(t.message||"Failed to fetch users data"),S(()=>new Error("Failed to fetch users data")))))}updateUserList(t,e){let i=this.currentUser();if(!i)return S(()=>new Error("No user found"));let n=i[t]||[];if(n.some(l=>l.id===e.id&&l.media_type===e.media_type&&l.title===e.title))return h(y(c({},i),{id:i.id||"",firstName:i.firstName||"",lastName:i.lastName||"",email:i.email||"",image:i.image||"",moviePreferences:i.moviePreferences||[],favorites:i.favorites||[],watchlist:i.watchlist||[],watchedList:i.watchedList||[],following:i.following||[],followers:i.followers||[],privilege:i.privilege||null}));let o=[...n,e];return this.api.patch(`/users/${i.id}`,{[t]:o}).pipe(g(l=>{this.currentUser.set(y(c({},i),{[t]:l[t]}))}),m(l=>(console.error(`Error updating ${t}:`,l),this.error.set(l.message||`Failed to update ${t}`),S(()=>new Error(`Failed to update ${t}`)))))}addToFavorites(t,e,i){return this.updateUserList("favorites",{id:t,title:e,media_type:i})}addToWatchlist(t,e,i){return this.updateUserList("watchlist",{id:t,title:e,media_type:i})}addToWatchedList(t,e,i){return this.updateUserList("watchedList",{id:t,title:e,media_type:i})}removeFromUserList(t,e){let i=this.currentUser();if(!i)return S(()=>new Error("No user found"));let n=(i[t]||[]).filter(s=>s.id!==e);return this.api.patch(`/users/${i.id}`,{[t]:n}).pipe(g(s=>{this.currentUser.set(y(c({},i),{[t]:s[t]}))}),m(s=>(console.error(`Error removing from ${t}:`,s),this.error.set(s.message||`Failed to remove from ${t}`),S(()=>new Error(`Failed to remove from ${t}`)))))}removeFromFavorites(t){return this.removeFromUserList("favorites",t)}removeFromWatchlist(t){return this.removeFromUserList("watchlist",t)}removeFromWatchedList(t){return this.removeFromUserList("watchedList",t)}followUser(t){let e=this.currentUser();return e?e.id===t?S(()=>new Error("Cannot follow yourself")):this.api.get(`/users/${t}`).pipe(U(i=>{let n=Array.from(new Set([...e.following||[],t])).filter(o=>!!o),s=Array.from(new Set([...i.followers??[],e.id])).filter(o=>!!o);return oe({currentUserUpdate:this.api.patch(`/users/${e.id}`,{following:n}),targetUserUpdate:this.api.patch(`/users/${t}`,{followers:s})}).pipe(v(()=>({following:n,followers:s})))}),g(i=>{let n=this.currentUser();n&&(this.currentUser.set(y(c({},n),{following:i.following})),console.log("current user updated"))}),m(i=>(this.error.set(i.message||"Failed to follow user"),S(()=>new Error("Failed to follow user"))))):S(()=>new Error("No user found"))}unfollowUser(t){let e=this.currentUser();return e?e.id===t?S(()=>new Error("Cannot unfollow yourself")):this.api.get(`/users/${t}`).pipe(U(i=>{let n=(e.following??[]).filter(o=>o!==t),s=(i.followers??[]).filter(o=>o!==e.id);return oe({currentUserUpdate:this.api.patch(`/users/${e.id}`,{following:n}),targetUserUpdate:this.api.patch(`/users/${t}`,{followers:s})}).pipe(v(()=>({following:n,followers:s})))}),g(i=>{let n=this.currentUser();n&&(this.currentUser.set(y(c({},n),{following:i.following})),console.log("current user updated"))}),m(i=>(this.error.set(i.message||"Failed to unfollow user"),S(()=>new Error("Failed to unfollow user"))))):S(()=>new Error("No user found"))}fetchMoviesList(t){if(!t||t.length===0)return h([]);let i=t.map(n=>{let{id:s,media_type:o}=n;return o==="movie"?this.movieService.fetchTMDBMovieData(`/movie/${s}?language=en-US`):o==="tv"?this.movieService.fetchTMDBMovieData(`/tv/${s}?language=en-US`):h(null)}).filter(Boolean);return i.length===0?h([]):oe(i).pipe(v(n=>n.filter(Boolean)))}isFavorite(t){return this.currentUser()?.favorites?.some(e=>e.id===t)??!1}isWatched(t){return this.currentUser()?.watchedList?.some(e=>e.id===t)??!1}isWatchlist(t){return this.currentUser()?.watchlist?.some(e=>e.id===t)??!1}userWatched(){let t=this.currentUser()?.watchedList||[],e=Math.floor(Math.random()*t.length);return t[e]||{title:"Iron Man",id:1726,media_type:"movie"}}isFollowing(t){let e=this.currentUser();return e?e.following?.includes(t)??!1:!1}getUserPrivilege(){return this.currentUser()?.privilege}getUserData(){return this.currentUser()}getAllUsersData(){return this.currentUser()}static \u0275fac=function(e){return new(e||r)};static \u0275prov=R({token:r,factory:r.\u0275fac,providedIn:"root"})};var Mt=class r{api=d($);notifications=b([]);loading=b(!1);error=b(null);stopPolling$=new T;fetchNotifications(t,e){this.loading.set(!0),this.api.get(`/notifications?to=${t}`).pipe(g(i=>{let n=this.notifications(),s=i.sort((l,a)=>new Date(a.date).getTime()-new Date(l.date).getTime());(s.length!==n.length||s.some((l,a)=>l.id!==n[a]?.id||l.read!==n[a]?.read))&&this.notifications.set(s),this.loading.set(!1)}),m(i=>(this.loading.set(!1),this.error.set(i.message||"Failed to fetch notifications"),h([])))).subscribe(),Je(e).pipe(ue(this.stopPolling$),U(()=>this.api.get(`/notifications?to=${t}`).pipe(g(i=>{let n=this.notifications(),s=i.sort((l,a)=>new Date(a.date).getTime()-new Date(l.date).getTime());(s.length!==n.length||s.some((l,a)=>l.id!==n[a]?.id||l.read!==n[a]?.read))&&this.notifications.set(i)}),m(i=>(this.loading.set(!1),this.error.set(i.message||"Failed to fetch notifications"),h([])))))).subscribe()}stopFetchingNotifications(){this.stopPolling$.next(),this.stopPolling$.complete(),this.stopPolling$=new T}getNotifications(){return this.notifications.asReadonly()}sendNotification(t){return!t||!t.to||!t.message?(this.error.set("Invalid notification data"),S(()=>new Error("Invalid notification data"))):(this.loading.set(!0),this.api.post("/notifications",t).pipe(g(()=>{this.loading.set(!1)}),m(e=>(this.loading.set(!1),this.error.set(e.message||"Failed to send notification"),S(()=>e)))))}markAsRead(t){return this.loading.set(!0),this.api.patch(`/notifications/${t}`,{read:!0}).pipe(v(()=>{let i=this.notifications().map(n=>n.id===t?y(c({},n),{read:!0}):n);return this.notifications.set(i),this.loading.set(!1),i}),m(e=>{throw this.loading.set(!1),this.error.set(e.message||"Failed to mark notification as read"),e}))}markAllAsRead(){let t=this.notifications(),e=t.filter(n=>!n.read);if(e.length===0)return h(t);this.loading.set(!0);let i=e.map(n=>this.api.patch(`/notifications/${n.id}`,{read:!0}));return oe(i).pipe(g(n=>{let s=new Map(n.map(l=>[l.id,l])),o=t.map(l=>s.has(l.id)?y(c({},l),{read:!0}):l);this.notifications.set(o),this.loading.set(!1)}),m(n=>{throw this.loading.set(!1),this.error.set(n.message||"Failed to mark all as read"),n}))}static \u0275fac=function(e){return new(e||r)};static \u0275prov=R({token:r,factory:r.\u0275fac,providedIn:"root"})};var ln=class r{api=d($);authService=d(be);reviews=b([]);loading=b(!1);error=b(null);currrentUser=ni(()=>this.authService.getUser());fetchReviews(t){return this.loading.set(!0),this.api.get(`/reviews?movieId=${t}`).pipe(g(e=>{let i=e.sort((n,s)=>n.user.email===this.currrentUser()?.email&&s.user.email!==this.currrentUser()?.email?-1:n.user.email!==this.currrentUser()?.email&&s.user.email===this.currrentUser()?.email?1:0);this.reviews.set(i),this.loading.set(!1)}),m(e=>(this.loading.set(!1),this.error.set(e.message||"Failed to fetch reviews"),console.log("Network error: ",e),[])))}postOrUpdateReview(t,e,i=!1){this.loading.set(!0);let n=new Date().toISOString(),s=i?c({},t):y(c({},t),{updatedAt:n}),o=y(c({},t),{createdAt:n,updatedAt:n}),l;return e?l=this.api.patch(`/reviews/${e}`,s):l=this.api.post("/reviews",o),l.pipe(g(a=>{let u=this.reviews();if(e){let f=u.map(C=>C.id===e?a:C).sort((C,N)=>C.user.email===this.currrentUser()?.email&&N.user.email!==this.currrentUser()?.email?-1:C.user.email!==this.currrentUser()?.email&&N.user.email===this.currrentUser()?.email?1:0);this.reviews.set(f)}else this.reviews.set([a,...u]);this.loading.set(!1)}),m(a=>{throw this.loading.set(!1),this.error.set(a.message||"Failed to add or update review"),a}))}generateReplyId(){let t=Date.now().toString(36),e=Math.random().toString(36).substring(2,10);return`reply_${t}_${e}`}postOrUpdateReply(t,e,i,n=!1){this.loading.set(!0);let s=new Date().toISOString(),o=n?c({},t):y(c({},t),{updatedAt:s}),l=y(c({},t),{replyId:this.generateReplyId(),createdAt:s,updatedAt:s});return this.api.get(`/reviews/${e}`).pipe(v(a=>{let u=a.replies||[],p;return i?p=u.map(f=>f.replyId===i?c(c({},f),o):f):p=[l,...u],y(c({},a),{replies:p})}),U(a=>this.api.patch(`/reviews/${e}`,a)),g(a=>{let p=this.reviews().map(f=>f.id===e?a:f);this.reviews.set(p),this.loading.set(!1)}),m(a=>{throw this.loading.set(!1),this.error.set(a.message||"Failed to add or update reply"),a}))}deleteReview(t){return this.loading.set(!0),this.api.delete(`/reviews/${t}`).pipe(g(()=>{let i=this.reviews().filter(n=>n.id!==t).sort((n,s)=>n.user.email===this.currrentUser()?.email&&s.user.email!==this.currrentUser()?.email?-1:n.user.email!==this.currrentUser()?.email&&s.user.email===this.currrentUser()?.email?1:0);this.reviews.set(i),this.loading.set(!1)}),m(e=>(this.loading.set(!1),this.error.set(e.message||"Failed to delete review"),console.log("Network error: ",e),z)))}deleteReply(t,e){return this.loading.set(!0),this.api.get(`/reviews/${t}`).pipe(U(i=>{let n=i.replies.filter(o=>o.replyId!==e),s=y(c({},i),{replies:n});return this.api.patch(`/reviews/${t}`,s)}),g(i=>{let s=this.reviews().map(o=>o.id===t?i:o).sort((o,l)=>{let a=this.currrentUser()?.email;return o.user.email===a&&l.user.email!==a?-1:o.user.email!==a&&l.user.email===a?1:0});this.reviews.set(s),this.loading.set(!1)}),v(()=>{}),m(i=>(this.loading.set(!1),this.error.set(i.message||"Failed to delete reply"),console.error("Network error:",i),z)))}getReviews(){return this.reviews()}getLoading(){return this.loading()}getError(){return this.error()}static \u0275fac=function(e){return new(e||r)};static \u0275prov=R({token:r,factory:r.\u0275fac,providedIn:"root"})};var At=class r{_message$=new A(null);message$=this._message$.asObservable();show(t,e="info"){this._message$.next({text:t,type:e}),setTimeout(()=>this._message$.next(null),3e3)}static \u0275fac=function(e){return new(e||r)};static \u0275prov=R({token:r,factory:r.\u0275fac,providedIn:"root"})};var un=class r{api=d($);snackbarService=d(At);notificationService=d(Mt);API_ENDPOINT="/movie-requests";requests=b([]);loading=b(!1);error=b(null);getCurrentTimestamp(){return new Date().toISOString()}fetchMovieRequests(){return this.loading.set(!0),this.error.set(null),this.api.get(this.API_ENDPOINT).pipe(g(t=>{this.requests.set(t),this.loading.set(!1)}),m(t=>{throw this.loading.set(!1),this.error.set(t.message||"Failed to fetch movie requests"),t}))}getMovieRequests(){return this.api.get(this.API_ENDPOINT)}getMovieRequestById(t){return this.api.get(`${this.API_ENDPOINT}/${t}`)}createMovieRequest(t,e,i){return this.api.get(`/movies?title=${encodeURIComponent(t.movieTitle)}&media_type=${t.mediaType}`).pipe(U(s=>{let o=s.find(l=>l.title.toLowerCase()===t.movieTitle.toLowerCase()&&new Date(l.released).getFullYear()===parseInt(t.year));return o?(this.snackbarService.show("Movie already exists. You can search now to view","info"),h(o)):this.api.post(this.API_ENDPOINT,t).pipe(g(()=>{let l={date:new Date().toISOString(),from:e,to:"Admin1",message:`${i} requested for a movie!`,read:!1};this.notificationService.sendNotification(l).subscribe(),this.snackbarService.show("Your movie request has been submitted!","success")}))}),m(s=>{throw this.snackbarService.show("Failed to create movie request","error"),s}))}updateMovieRequest(t,e){return this.api.patch(`${this.API_ENDPOINT}/${t}`,e)}deleteMovieRequest(t){return this.api.delete(`${this.API_ENDPOINT}/${t}`)}static \u0275fac=function(e){return new(e||r)};static \u0275prov=R({token:r,factory:r.\u0275fac,providedIn:"root"})};export{V as a,ee as b,Fn as c,P as d,Ri as e,Do as f,$o as g,Po as h,It as i,be as j,Ct as k,an as l,ln as m,Mt as n,At as o,un as p};
